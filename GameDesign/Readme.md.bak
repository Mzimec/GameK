# Gameplay Design Document

## 1. Popisek

Hra Kryplague bude izometrickým tahovým RPG inspirovaný tituly jako Bladur's Gate I a II, Pathfinder: Kingmaker, Pathfinder: Wrath of Righteous.
Hra bude postavena na vlstním herním systému, který přidává větší hlobku taktiky do tahových soubojů. 
Herní svět bude připomínat potemnělé ranně rensanční Evropu, kterou prolézá morová pohroma. Každý se ptá, jak mohl bůh něco takového dopustit.
Dochází k rozpadu společnosti, každý se vypořadává s hrozícím nebezpečím svým způsobem. 

---

## 2. Jádro herního zážitku

Hra klade důraz na:
- **Taktické myšlení:** Souboje vyžadují analýzu situace a správné využití akcí.  
- **Strategii zdrojů:** Hráč hospodaří s omezenými akčními body, kouzly a buffy.  
- **Variabilitu výsledků:** Každá akce má šanci selhat či uspět podle hodů kostkou.  
- **Dlouhodobý rozvoj:** Postavy se zlepšují, získávají nové schopnosti a vybavení.  
- **Příběhové volby:** Morální rozhodnutí a interakce mají vliv na výsledek kampaně.  

---

## 3. Gameplay Loop

### 3.1 Primární smyčka
1. **Průzkum světa**  
   Hráč se pohybuje po mapě, komunikuje s NPC, sbírá informace a vybavení, plní úkoly.  
2. **Setkání**  
   Příběhová či náhodná událost vede k boji, hádce, pasti nebo interakci.  
3. **Rozhodnutí / Souboj**  
   - Pokud je situace konfrontační, přechází do **tahového souboje**.  
   - V jiných případech může proběhnout **hod na dovednost** (např. přesvědčování).  
4. **Odměna a rozvoj**  
   Úspěšné dokončení akce přináší zkušenosti, loot a příběhový posun.  
5. **Správa družiny**  
   Hráč leveluje postavy, vybavuje je nalezenými předměty a tvoří efektivní tým pro překonání překážek.  

Tento cyklus se opakuje — střídá se **napětí souboje** a **klid správy**.

---

## 4. Tahový souboj

### 4.1 Princip
Každý boj probíhá v tazích. V jednom kole se vystřídají všechny frakce (hráč, nepřátelské pořpípadě spojenecké skupiny).  
Během kola táhnou všechny charaktery: Jednotlivé frakce se střídají v tazích, vyberou si charkter, kterým táhnou a předají iniciativu dál.
Pokud není charkterů v jednotlivých bojových skupinách stejně, těm, které dojdou charktery končí kolo.
Každá postava má určité **Akční Body (AP)**, které určuje, kolik akcí může provést.

### 4.2 Typy akcí
- **Pohyb** – stojí určité množství AP podle vzdálenosti.  
- **Útok** – hod proti obraně cíle (Attack Roll).  
- **Kouzlo / Schopnost** – může mít AoE efekt, vyžaduje Saving Throw.  
- **Interakce** – otevření truhly, aktivace zařízení, pomoc spojenci.  

### 4.3 Rozhodovací vrstvy hráče
1. **Taktická úroveň:** výběr cíle, pozice, pořadí akcí.  
2. **Strategická úroveň:** správné rozložení zdrojů (mana, cooldowny, buffy).  
3. **Riziková úroveň:** posouzení šance na úspěch (pravděpodobnost hodu).  

### 4.4 Typy hodů
- **Útočný hod (Attack Roll):** porovnává d20 + bonus s cílovým AC.  
- **Záchranný hod (Saving Throw):** cíl se brání proti efektu (DC kouzla).  
- **Kontrolní hod (Skill Check):** používá se mimo boj (např. Lockpicking, Persuasion).  

### 4.5 Výsledky hodu
| Typ výsledku | Popis | Efekt |
|---------------|--------|--------|
| **Critical Success** | d20 = 20 | Dvojitý efekt nebo extra bonus |
| **Success** | Hod >= cílové hodnotě | Akce proběhne úspěšně |
| **Failure** | Hod < cílové hodnotě | Akce selže |
| **Critical Failure** | d20 = 1 | Negativní následek nebo postih |

---

## 5. Postavy a rozvoj

### 5.1 Atributy
Základní šestice:
- **Strength (Síla):** ovlivňuje melee útoky a nesení.  
- **Dexterity (Obratnost):** ovlivňuje iniciativu, obranu a ranged útoky.  
- **Constitution (Odolnost):** určuje HP a výdrž.  
- **Intelligence (Inteligence):** ovlivňuje magické dovednosti a znalosti.  
- **Wisdom (Moudrost):** ovlivňuje vnímání a záchranné hody.  
- **Charisma (Charisma):** pro sociální interakce a magii založenou na vůli.  

### 5.2 Schopnosti (Abilities)
Každá schopnost je definována jako **akce**, kterou může postava použít.  
Mají parametry:
- Typ (útok, kouzlo, buff, utility).  
- Cíl (single target, area, self).  
- Cena (v AP, nebo speciální zdroj).  
- DC (obtížnost pro záchranný hod).  
- Vedlejší efekty (poškození, omráčení, hoření…).  

### 5.3 Rozvoj
- Levelování přináší nové schopnosti a zlepšuje staty.  
- Volba specializací (např. Paladin → Crusader / Defender).  
- Hráč dělá významné volby v progresu postavy.  

---

## 6. Efekty, buffy a debuffy

### 6.1 Princip
Buffy a debuffy dočasně mění hodnoty statistik, často skrze modifikátory.  
Mohou mít trvání (v kolech) nebo podmínky (dokud trvá kouzlo).  

### 6.2 Typy efektů
- **Posilující:** Bless, Haste, Heroism  
- **Oslabující:** Poison, Slow, Curse  
- **Kontrolní:** Stun, Fear, Charm  

### 6.3 Stacking pravidla
- Stejné efekty ze stejného zdroje se **ne-stackují**.  
- Různé zdroje mohou vytvářet **multiplikativní efekty**.  

---

## 7. Pacing a filozofie boje

### 7.1 Délka boje
- Krátký střet: 2–4 kola.  
- Velký střet: 5–8 kol.  
Cílem je, aby hráč měl **čas plánovat, ale necítil únavu** z mikromanagementu.

### 7.2 Dynamika
- Boje začínají výhodou iniciativy.  
- Každý tah přináší viditelný dopad (damage, kontrola, buff).  
- Klíčem je **přehlednost informací** — hráč by měl chápat, proč uspěl/neuspěl.  

### 7.3 Umělá inteligence
- AI analyzuje pravděpodobnost úspěchu (`ActionApproximation`).  
- Vyhodnocuje riziko a odměnu podle stavu bitvy.  
- Upřednostňuje cíle s nižším HP nebo strategickou pozicí.  

---

## 8. Odměny a motivace

- **XP** – zisk zkušeností za poražené nepřátele.  
- **Loot** – zbraně, brnění, kouzla.  
- **Příběhový postup** – nové oblasti, vztahy, možnosti dialogů.  
- **Morální reputace** – ovlivňuje reakce NPC a konce příběhu.  

---

## 9. Atmosféra a estetika

- **Tón:** Temně-hrdinský fantasy svět s důrazem na morální dilemata.  
- **Inspirace:** Planescape: Torment, Pathfinder, Divinity: Original Sin II.  
- **Hudba:** Orchestrální, s motivy podle frakcí a prostředí.  
- **UI styl:** Taktický, čitelný, s jemnými runovými ornamenty.  

---

## 10. Dlouhodobé cíle vývoje
- Implementovat plnohodnotný **Combat Editor** (vizuální tvorba akcí).  
- Přidat **AI Personality systém** pro unikátní rozhodování NPC.  
- Rozšířit **campaign mode** o mapu světa a volby s trvalými následky.  
